<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="Author: Cevi Taufik, email: cevitaufik@gmail.com">
    <meta name="description" content="situs yang menjual barang-barang bekas berkualitas yang berlokasi di Jatinangor Sumedang, kami menjual berbagai barang dari mulai buku, pakaian, dan lainnya">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet preconnect" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/custom.css">

    <title>Little-f</title>
    <link rel="shortcut icon" href="img/mylogo.png">
  </head>
  <body id="home">
    <!-- navbar start-->
    <nav class="navbar navbar-expand-lg sticky-top navbar-dark bg-primary">
      <div class="container-lg">
        <a class="navbar-brand fw-bold" href="#">Little-f</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#home">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#unggulan">Produk unggulan</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#allProducts">Semua produk</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#contact">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- navbar end -->

    <!-- jumbotron start -->
    <div class="p-5 bg-primary text-white text-center">
      <div class="container-fluid py-5">
        <h1 class="display-5 fw-bold">Little-f</h1>
        <p>Berbelanja dimanapun kamu mau</p>
      </div>
    </div>
    <div class="svg-bg-top"></div>
    <!-- jumbotron end -->

    <!-- product start -->
    <div class="container mb-5">

      <!-- produk unggulan -->
      <div class="container shadow p-4 unggulan mb-5" id="unggulan">
        <h4 class="text-center p-3">Produk unggulan kami :</h4>
        <div class="row justify-content-center">

          <!-- looping produk unggulan -->
          <% let products = db[0].filter(p => p.bestProduct.toUpperCase() == 'Y') %>
          <% products.forEach(product => { %>
            <% const img = JSON.parse(product.image) %> 
            <div class="col-md-4 mb-3">
              <div class="card h-100 mb-4 rounded-end" data-aos="fade-up" data-aos-delay="100">
                <!-- menambahkan class ribbon untuk unggulan -->
                <% if (product.bestProduct.toUpperCase() == 'Y') { %>
                  <span class="ribbon">SPESIAL</span>
                <% } %>                              
                <img src="<%= img[0] %>" class="card-img-top" alt="<%= product.name %>" loading="lazy">
                <div class="card-body">
                  <h5 class="card-title"><%= product.name %></h5>
                  <h5 class="card-title text-success"><%= product.price %></h5>
                </div>
                <div class="text-center mt-3 card-footer bg-white border-0">
                  <button type="button" class="btn btn-primary mt-2" data-bs-toggle="modal" data-bs-target="#<%= product.code %>">
                    Detail produk
                  </button>
                  <a href="<%= product.shopee %>" class="btn text-white mt-2 shopee" role="button" target="blank">Order lewat Shopee</a>
                </div>
                <div class="modal fade" id="<%= product.code %>" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                  <!-- modal full screen -->
                  <div class="modal-dialog modal-fullscreen">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="staticBackdropLabel"><%= product.name %></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="row p-md-3 bg-white justify-content-center">
                        <div class="col-md-5">
                          <!-- carousel start -->
                          <div id="carousel<%= product.code %>" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-indicators">
                              <button type="button" data-bs-target="#carousel<%= product.code %>" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                              <% for( let i = 1; i < img.length; i++ ) { %>
                                <button type="button" data-bs-target="#carousel<%= product.code %>" data-bs-slide-to="<%= i %>" aria-label="Slide <%= i %>"></button>
                              <% } %>
                            </div>
                            <div class="carousel-inner">
                              <div class="carousel-item active">
                                <img src="<%= img[0] %>" class="d-block w-100" alt="<%= product.name %>">
                              </div>
                              <% for( let i = 1; i < img.length; i++ ) { %>
                                <div class="carousel-item">
                                  <img src="<%= img[i] %>" class="d-block w-100" alt="<%= product.name %>">
                                </div>
                              <% } %>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carousel<%= product.code %>" data-bs-slide="prev">
                              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                              <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carousel<%= product.code %>" data-bs-slide="next">
                              <span class="carousel-control-next-icon" aria-hidden="true"></span>
                              <span class="visually-hidden">Next</span>
                            </button>
                          </div>
                          <!-- carousel end -->
                        </div>
                        <div class="col-md-7 p-4">
                          <h4 class="card-title text-success pt-3"><%= product.price %></h4>
                          <% const desc = JSON.parse(product.description) %>
                          <% for( let i = 0; i < desc.length; i++ ) { %>
                            <h5><%= desc[i] %></h5>
                          <% } %>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <a href="<%= product.shopee %> " class="btn text-white mt-2 shopee" role="button" target="blank">Order lewat Shopee</a>
                            <a href="https://api.whatsapp.com/send?phone=<%= db[1][0].whatsapp %>&text=Apakah%20&quot;<%= product.name.replace('\s', '%20') %>&quot;%20masih%20ada?" class="btn mt-2 whatsapp text-white" role="button" target="blank">
                              <span class="bi bi-whatsapp"></span>&nbsp;&nbsp;Chat
                            </a>
                          </div>      
                        </div>
                      </div>                        
                    </div>
                  </div>
                  <!-- modal full screen end-->
                </div>
              </div>
            </div>
          <% }) %> 
        </div>
      </div>
      <!-- akhir produk unggulan -->

      <!-- semua produk -->
      <div class="semua-produk rounded-3 shadow bg-white p-4 mt-5" id="allProducts">
        <div class="dropdown text-center d-grid col-6 mx-auto mt-2 mb-4">
          <select class="btn text-white bg-primary" id="productFilter">
            <% 
              let category = [];
              const unique = (value, index, self) => {
                return self.indexOf(value) === index;
              }

              db[0].forEach(e => {
                let filtered = e.category.charAt(0).toUpperCase() + e.category.substring(1);
                category.push(filtered);
              })

              category = category.filter(unique);
              category = category.sort()
            %> 
            <% category.forEach(e => { %>
              <option value><%= e %> </option>
            <% }) %>
            <option value selected="selected">Semua produk</option>             
          </select>
        </div>

        <div class="row justify-content-center">
          <% db[0].forEach(product => { %>
            <% const img = JSON.parse(product.image) %> 
            <div class="col-md-4 mb-3">
              <div class="card h-100 mb-4 rounded-end" data-aos="fade-up" data-aos-delay="100">
                <!-- menambahkan class ribbon untuk unggulan -->
                <% if (product.bestProduct.toUpperCase() == 'Y') { %>
                  <span class="ribbon">SPESIAL</span>
                <% } %>                              
                <img src="<%= img[0] %>" class="card-img-top" alt="<%= product.name %>" loading="lazy">
                <div class="card-body">
                  <h5 class="card-title"><%= product.name %></h5>
                  <h5 class="card-title text-success"><%= product.price %></h5>
                </div>
                <div class="text-center mt-3 card-footer bg-white border-0">
                  <button type="button" class="btn btn-primary mt-2" data-bs-toggle="modal" data-bs-target="#<%= product.code %>">
                    Detail produk
                  </button>
                  <a href="<%= product.shopee %>" class="btn text-white mt-2 shopee" role="button" target="blank">Order lewat Shopee</a>
                </div>
                <div class="modal fade" id="<%= product.code %>" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                  <!-- modal full screen -->
                  <div class="modal-dialog modal-fullscreen">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="staticBackdropLabel"><%= product.name %></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="row p-md-3 bg-white justify-content-center">
                        <div class="col-md-5">
                          <!-- carousel start -->
                          <div id="carousel<%= product.code %>" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-indicators">
                              <button type="button" data-bs-target="#carousel<%= product.code %>" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                              <% for( let i = 1; i < img.length; i++ ) { %>
                                <button type="button" data-bs-target="#carousel<%= product.code %>" data-bs-slide-to="<%= i %>" aria-label="Slide <%= i %>"></button>
                              <% } %>
                            </div>
                            <div class="carousel-inner">
                              <div class="carousel-item active">
                                <img src="<%= img[0] %>" class="d-block w-100" alt="<%= product.name %>">
                              </div>
                              <% for( let i = 1; i < img.length; i++ ) { %>
                                <div class="carousel-item">
                                  <img src="<%= img[i] %>" class="d-block w-100" alt="<%= product.name %>">
                                </div>
                              <% } %>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carousel<%= product.code %>" data-bs-slide="prev">
                              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                              <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carousel<%= product.code %>" data-bs-slide="next">
                              <span class="carousel-control-next-icon" aria-hidden="true"></span>
                              <span class="visually-hidden">Next</span>
                            </button>
                          </div>
                          <!-- carousel end -->
                        </div>
                        <div class="col-md-7 p-4">
                          <h4 class="card-title text-success pt-3"><%= product.price %></h4>
                          <% const desc = JSON.parse(product.description) %>
                          <% for( let i = 0; i < desc.length; i++ ) { %>
                            <h5><%= desc[i] %></h5>
                          <% } %>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <a href="<%= product.shopee %> " class="btn text-white mt-2 shopee" role="button" target="blank">Order lewat Shopee</a>
                            <a href="https://api.whatsapp.com/send?phone=<%= db[1][0].whatsapp %>&text=Apakah%20&quot;<%= product.name.replace('\s', '%20') %>&quot;%20masih%20ada?" class="btn mt-2 whatsapp text-white" role="button" target="blank">
                              <span class="bi bi-whatsapp"></span>&nbsp;&nbsp;Chat
                            </a>
                          </div>      
                        </div>
                      </div>                        
                    </div>
                  </div>
                  <!-- modal full screen end-->
                </div>
              </div>
            </div>
          <% }) %>
        </div>
      </div>
      <!-- akhir semua produk -->
    </div>
    <!-- product end -->

    <!-- kontak -->
    <div class="container text-center" id="contact">
      <div class="row justify-content-center">
        <div class="col-md-7">
          <h4 class="mb-4">Hubungi kami</h4>
          <div class="mb-5">
            <div class="container border p-3 rounded-3">
              <h6 class="mb-3">Chat langsung melalui Whatsapp</h6>
              <div class="form-floating">
                <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 100px" ng-model="pesan"></textarea>
                <label for="floatingTextarea2">Tulis pesan Whatsapp anda disini</label>
                <div class="d-grid col-3 mx-auto">
                  <a href="https://api.whatsapp.com/send?phone={{owner.whatsapp}}&text={{ pesan | deleteSpace}}" class="btn mt-3 whatsapp bi bi-whatsapp text-white" role="button" target="blank">&nbsp;Kirim</a>
                </div>
              </div>
            </div>
          </div>

          <div class="container border p-3 rounded-3">
            <h6 class="mb-3">Atau melalui email</h6>
            <div class="mb-3">
              <div class="alert alert-success alert-dismissible fade show d-none" role="alert">
                <strong>Terimakasih</strong> pesan anda sudah kami terima. Kami akan segera menghubungi anda.
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
              <form action="#" name="contact-form">
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" placeholder="name@example.com" name="nama">
                  <label for="floatingInput">Nama</label>
                </div>
                <div class="form-floating mb-3">
                  <input type="email" class="form-control" placeholder="name@example.com" name="email">
                  <label for="floatingInput">Alamat email</label>
                </div>
                <div class="form-floating">
                  <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 100px" name="pesan"></textarea>
                  <label for="floatingTextarea2">Pesan</label>
                </div>
                <button type="submit" class="btn btn-primary mt-3 col-3 mx-auto btn-kirim">Kirim</button>
                <button class="btn btn-primary mt-3 col-3 mx-auto btn-loading d-none" type="button" disabled>
                  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                  Loading...
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- akhir kontak -->

    <!-- footer start -->
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#212429" fill-opacity="1" d="M0,256L60,266.7C120,277,240,299,360,293.3C480,288,600,256,720,213.3C840,171,960,117,1080,128C1200,139,1320,213,1380,250.7L1440,288L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>
    <div class="container-fluid text-center bg-dark p-5 text-white" id="contact">
      <div class="container-lg">
        <div data-aos="slide-up" data-aos-once="true">
          <h5 class="p-5">Ikuti kami :</h5>
          <div class="row justify-content-center">
            <div class="col-lg-5">
              <div class="row">
                <div class="col-sm">
                  <a href="{{owner.linkInstagram}}" class="text-decoration-none text-white" target="blank">
                    <img src="/img/instagram.png" alt="instagram">
                    <p class="card-title p-2">@littlef.shop</p>
                  </a>
                </div>
                <div class="col-sm">
                  <a href="{{owner.linkShopee}}" class="text-decoration-none text-white" target="blank">
                    <img src="/img/shopee.png" alt="shopee">
                    <p class="card-title p-2">Shopee</p>
                  </a>
                </div>
                <div class="col-sm">
                  <a href="{{owner.linkTokopedia}}" class="text-decoration-none text-white" target="blank">
                    <img src="/img/tokopedia.png" alt="tokopedia">
                    <p class="card-title p-2">Tokopedia</p>
                  </a>
                </div>
              </div>
            </div>
          </div>
          <p class="text-center mt-5 text-white-50">Little-f 2021</p>
        </div>
      </div>
    </div>
    <!-- footer end -->
    
  <script rel="preconnect" src="https://unpkg.com/aos@next/dist/aos.js"></script>
  <script>
    AOS.init();

    const scriptURL = owner.googleSheet;
    const form = document.forms['contact-form'];
    const btnKirim = document.querySelector('.btn-kirim');
    const btnLoading = document.querySelector('.btn-loading');
    const myAlert = document.querySelector('.alert');

    form.addEventListener('submit', e => {
      e.preventDefault()
      btnLoading.classList.toggle('d-none');
      btnKirim.classList.toggle('d-none');

      fetch(scriptURL, { method: 'POST', body: new FormData(form)})
        .then(response => {
          btnLoading.classList.toggle('d-none');
          btnKirim.classList.toggle('d-none');
          myAlert.classList.toggle('d-none');
          form.reset();
          console.log('Success!', response);
        })
        .catch(error => console.error('Error!', error.message))
    })

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </body>
</html>
