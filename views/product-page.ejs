<% 
  const img = JSON.parse(product.image)
  const desc = JSON.parse(product.description)
  
  const priceForm = (p) => {
    const price = 'Rp. ';
    const angka = p.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ".");

    return price + angka;
  }
%>
<div class="grid justify-items-center py-2 md:py-10">
  <div class="w-4/5">
    <h1 class="text-2xl font-bold border-b-2 border-gray-300"><%= product.name %> </h1>
    <div class="grid grid-cols-1 md:grid-cols-2 md:gap-4">

      <div class="pt-5 md:py-10">
        <div class="relative w-full h-screen">
          <div class="absolute foto-1">
            <img src="/<%= img[0] %>" alt="<%= product.name %>" class="w-full">
            <div class="absolute grid grid-cols-2 gap-0 top-0 h-full w-full">
              <div class="place-self-center w-full">
                <div class="bg-white h-10 ml-2 rounded-full grid w-10">
                  <div class="block absolute place-self-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
                    </svg>
                  </div>
                </div>
              </div>
              <div class="place-self-center w-full">
                <div class="bg-white h-10 ml-auto mr-2 rounded-full grid w-10">
                  <div class="block absolute place-self-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="absolute foto-2">
            <img src="/<%= img[1] %>" alt="<%= product.name %>" class="w-full">
            <div class="absolute grid grid-cols-2 gap-0 top-0 h-full w-full">
              <div class="place-self-center w-full">
                <div class="bg-white h-10 ml-2 rounded-full grid w-10">
                  <div class="block absolute place-self-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
                    </svg>
                  </div>
                </div>
              </div>
              <div class="place-self-center w-full">
                <div class="bg-white h-10 ml-auto mr-2 rounded-full grid w-10">
                  <div class="block absolute place-self-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="absolute foto-3">
            <img src="/<%= img[2] %>" alt="<%= product.name %>" class="w-full">
            <div class="absolute grid grid-cols-2 gap-0 top-0 h-full w-full">
              <div class="place-self-center w-full">
                <div class="bg-white h-10 ml-2 rounded-full grid w-10">
                  <div class="block absolute place-self-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
                    </svg>
                  </div>
                </div>
              </div>
              <div class="place-self-center w-full">
                <div class="bg-white h-10 ml-auto mr-2 rounded-full grid w-10">
                  <div class="block absolute place-self-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <div class="py-2 md:py-10">
      <h1 class="text-lg md:text-4xl font-bold text-green-500 pb-3"><%= priceForm(product.price) %></h1>
      <% for( let i = 0; i < desc.length; i++ ) { %>
      <h3 class="font-semibold"><%= desc[i] %></h3>
      <% } %>
    </div>
  </div>
</div>
</div>

<script>
  // Show filtered elements
  const addClass = (element, name) => {
    const arr1 = element.className.split(" ");
    const arr2 = name.split(" ");
    for (let i = 0; i < arr2.length; i++) {
      if (arr1.indexOf(arr2[i]) == -1) {
        element.className += " " + arr2[i];
      }
    }
  }

  // Hide elements that are not selected
  const removeClass = (element, name) => {
    const arr1 = element.className.split(" ");
    const arr2 = name.split(" ");
    for (let i = 0; i < arr2.length; i++) {
      while (arr1.indexOf(arr2[i]) > -1) {
        arr1.splice(arr1.indexOf(arr2[i]), 1);
      }
    }
    element.className = arr1.join(" ");
  }

  const filterSelection = c => {
    const x = document.getElementsByClassName("product-card");
    if (c == "all") c = "";
    // Add the "show" class (display:block) to the filtered elements, and remove the "show" class from the elements that are not selected
    for (let i = 0; i < x.length; i++) {
      removeClass(x[i], "show");
      if (x[i].className.indexOf(c) > -1) addClass(x[i], "show");
    }
  }
  filterSelection("all")


  // Add active class to the current control button (highlight it)
  const btnContainer = document.getElementById("myBtnContainer");
  const btns = btnContainer.getElementsByClassName("btn");
  for (i = 0; i < btns.length; i++) {
    btns[i].addEventListener("click", () => {
      var current = document.getElementsByClassName("active");
      current[0].className = current[0].className.replace(" active", "");
      this.className += " active";
    });
  }
</script>